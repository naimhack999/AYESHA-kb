const activeSessions = new Map();

module.exports.config = {
    name: "murgi",
    version: "1.0.2",
    hasPermssion: 2,
    credits: "Fixed by kawsar",
    description: "ржоржЬрж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржорзНржпрж╛ржирж╢ржи ржХрж░рзБржи",
    commandCategory: "fun",
    usages: "murgi @mention | murgi stop",
    cooldowns: 5
};

module.exports.run = async function({ api, event }) {
    const threadID = event.threadID;

    if (event.body.toLowerCase() === "stop" || event.body.toLowerCase() === "murgi off") {
        if (activeSessions.has(threadID)) {
            const timeouts = activeSessions.get(threadID);
            timeouts.forEach(clearTimeout);
            activeSessions.delete(threadID);
            return api.sendMessage("ржЪрзБржжрж╛рж░ рж╕ржоржпрж╝ ржХрзЗржЙ ржерж╛ржорж╛ржпрж╝ ржнрж╛ржЗред", threadID);
        } else {
            return api.sendMessage("ржПржЦржи рждрзЛ ржХрж┐ржЫрзБржЗ ржЪрж▓ржЫрзЗ ржирж╛ ржмржирзНржз ржХрж░рж╛рж░ ржорждрзЛ!", threadID);
        }
    }

    const mention = Object.keys(event.mentions)[0];
    if (!mention) return api.sendMessage("ржпрж╛ржХрзЗ ржЪрзБржжрж╛рждрзЗ ржЪрж╛ржи рждрж╛ржХрзЗ ржорзНржпрж╛ржирж╢ржи ржХрж░рзБржи", threadID, event.messageID);

    const name = event.mentions[mention].replace(/@/g, '');
    const arraytag = [{ id: mention, tag: name }];

    const messages = [
        `рж▓рзЛ ржЪрзЛржжрж╛,,ЁЯе╡ЁЯЦХЁЯЦХ`,
        ` ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐,,,,ЁЯе╡ЁЯСЙЁЯСМ @${name}`,
        ` ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржмрзЛржи рж░рзЗ ржЪрзБржжрж┐,,,,ЁЯШбЁЯе╡ @${name}`,
        `ржорж╛ржжрж╛рж░ржЪрзЛржж рждрж░ ржЖржорзНржорзБ ржкржо ржкржо ржЦрж╛ржВржХрж┐рж░ ржкрзЛ,,,,, ЁЯдгЁЯдг @${name}`,
        ` ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржнрзБржжрж╛рзЯ ржнрзБржжрж╛рзЯ ржХрж╛ржорж░ ржжрж┐ржорзБ,,,,,   ЁЯе╡ЁЯШб @${name}`,
        ` ржЦрж╛ржВржХрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржХржерж╛ ржХ ржХржо ржХржо рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрзЗ ржмрж╛ржирж╛ржорзБ ржЖржЗржЯрзЗржо ржмрзЛржо,,,,ЁЯе╡ЁЯСЙЁЯСМ @${name}`,
        ` ржЙржорзНржоржорзНржорж╛ рждрж░ ржмрзЛржи ржПрж░ржХржЪрж┐ ржнрзБржжрж╛рзЯ,,,,ЁЯе╡ЁЯе╡ @${name}`,
        `рждрж░ ржЖржорзНржорзБ рж░рзЗ ржкрж╛рзЯржЬрж╛ржорж╛ ржЦрзБрж▓рзЗ ржЪрзБржжрж┐,,,ЁЯе╡ЁЯШбЁЯШб   @${name}`,
         `ржЯрзБржХрж╛ржЗ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,ЁЯе╡ЁЯе╡   @${name}`,
        ` depression ржерзЗржХрзЗржУ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБ*** ржжрж┐,,,ЁЯЦХЁЯЦХ @${name}`,
        ` ржмрж╕рзНрждрж┐рж░ ржЫрзЗрж▓рзЗ ржЕржирж▓рж╛ржЗржирзЗрж░ ржХрж┐ржВ,,,,,ЁЯЦХЁЯЦХЁЯШб  @${name}`,
        `  рзирзж ржЯрж╛ржХрж╛ ржП ржкрждрж┐рждрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,,ЁЯЦХЁЯШбЁЯе╡ @${name}`,
        ` ржмрзНржпрж╛рж╕рзНржпрж╛рж░ ржкрзЛрж▓рж╛ ржХржерж╛ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ ржЧрж╛ржоржЫрж╛ ржкрзЗржЪрж┐рзЯрзЗ,,,,,ЁЯе╡ЁЯе╡ @${name}`,
        ` рждрж░ ржХржЪрж┐ ржмрзЛржи ржПрж░ ржкржо ржкржо,,,,ЁЯе╡ЁЯе╡ЁЯШб @${name}`,
        ` ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,ЁЯе╡ЁЯе╡ЁЯШб @${name}`,
        ` ржЖржорж╛рж░ ржЬрж╛рж░ржЬ рж╢ржирзНрждрж╛ржи,,,,, @${name}`,
        ` ржмрж╛рж╕рзНржЯрзНрж░рж╛ржб ржПрж░ ржмрж╛ржЪрзНржЫрж╛ ржмрж╕рзНрждрж┐рж░ ржкрзЛрж▓рж╛,,,,,ЁЯЦХЁЯЦХЁЯЦХ  @${name}`,
        `  ржХрж╛ржорж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,,ЁЯЦХЁЯШбЁЯе╡ @${name}`,
        ` DNA ржЯрзЗрж╖рзНржЯ ржХрж░рж╛ ржжрзЗржЦржмрж┐ ржЖржорж╛рж░ ржЪрзБржжрж╛ рждрзЗржЗ рждрж░ ржЬржирзНржо,,,,,ЁЯЦХЁЯе╡ЁЯСЙЁЯСМ @${name}`,
        `  рждрж░ ржмрзЛржи рж░рзЗ ржкрж╛рзЯржЬрж╛ржорж╛ ржЦрзБрж▓рзЗ ржЪрзБржжрж┐,,,,,ЁЯЦХЁЯШб @${name}`,
        ` ржирж╛ржЯ ржмрж▓рзНржЯрзБ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,, ЁЯе╡ЁЯСЙЁЯСМ@${name}`,
        `рждрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐,,,, ЁЯШбЁЯШб @${name}`,
        `depression ржерзЗржХрзЗржУ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБ*** ржжрж┐,,, ЁЯдм  @${name}`,
        ` ржкрждрж┐рждрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,ЁЯе╡ЁЯе╡ @${name}`,
        `ржмрзНржпрж╛рж╕рзНржпрж╛рж░ ржкрзЛрж▓рж╛,,,,ЁЯСЙЁЯСМ  @${name}`,
        ` ржмрзНржпрж╛рж╢рзНржпрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,ЁЯСЙЁЯСМ @${name}`,
        `ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛,,,,,ЁЯЦХЁЯЦХЁЯе╡  @${name}`,
        ` ржорж╛ржжрж╛рж░ржЪрзЛржж,,,ЁЯЦХЁЯЦХЁЯЦХ @${name}`,
        `рж╣рж╛ржЗ ржорж╛ржжрж╛рж░ржЪрзЛржж рждрж░ рждрж░ ржмрзНржпрж╛рж╢рж╛ ржЬрж╛рждрзЗрж░ ржЖржорзНржорзБ ржЯрж╛ рж░рзЗ ржЖржжрж░ ржХрж░рзЗ ржХрж░рзЗ ржЪрзБржжрж┐,,,ЁЯе╡ЁЯЦХЁЯЦХ  @${name}`,
        `ржЪрзБржжрж╛ ржХрж┐ ржЖрж░рзЛ ржЦрж╛ржмрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ЁЯе╡@${name}`,
` ржмрж╛рждрж┐ржЬрж╛ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж▓рзЗ рж░рж╛ржЧ ржХрж░ржмрж┐ ржирж╛ рждрзЛ ржЖржЪрзНржЫрж╛ ржЬрж╛ рж░рж╛ржЧ ржХрж░рж┐рж╕ ржирж╛ рждрж░ ржЖржорзНржорзБрж░ ржХрж╛рж▓рж╛ ржнрзБржжрж╛рзЯ ржЖрж░ ржЪрзБржжрж▓рж╛ржо ржирж╛ рждрзЛ ржмрзЛржи ржПрж░ ржЬрж╛ржорж╛ ржЯрж╛ ржЦрзБрж▓рзЗ ржжрзЗ,,,,я┐╜ЁЯе╡@${name}`,
 `ржЕржирж▓рж╛ржЗржирзЗ ржЧрж╛рж▓рж┐ ржмрж╛ржЬ рж╣рзЯрзЗ ржЧрзЗржЫржд ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржПржоржи ржЪрзБржжрж╛ ржжрж┐ржорзБ рж▓рж╛ржЗржл ржЯрж╛ржЗржо ржоржирзЗ рж░рж╛ржЦржнрж┐ ржЖржмрж┐рж░ рждрж░ ржмрж╛ржк ржорж╛ржЧрж┐рж░ ржЫрзЗрж▓рзЗ,,,,,ЁЯе╡ЁЯСЙЁЯСМ @${name}`,
`ржЙржлржлржл ржЦрж╛ржжрзНржжрж╛ржорж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржЖржорзНржорзБрж░ ржХрж╛рж▓рж╛ ржнрзБржжрж╛рзЯ ржЖржорж╛рж░ ржорж╛рж▓ ржЖржЙржЯ рждрж░ ржХржЪрж┐ ржмрзЛржи рж░рзЗ ржЙржкрзНрждрж╛ ржХрж░рзЗ ржПржмрж╛рж░ ржЪрзБржжржмрзЛ,,,,ЁЯдгЁЯдг @${name}`,
 `ржмрж╛ржирзНржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ рждрж░ ржжрзБрж▓рж╛ ржнрж╛ржЗ ржПрж░ ржХрж╛ржирзНржжрзЗ ржлрзЗрж▓рзЗ,,,,ЁЯе╡ЁЯе╡ЁЯЦХ@${name}`,
`ржмрж╛ржирзНржжрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржмрзЛржирзЗрж░ ржнрзБржжрж╛ ржлрж╛ржХ ржХрж░ ржерзБрждрзБ ржжрж┐рзЯрзЗ ржнрзБржжрж╛рзЯ ржжржи ржбрзБржХрж╛ржорзБ,,,я┐╜ЁЯЦХ @${name}`,
` рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЖржЪрж╛рж░ ржПрж░ рж▓рзЛржн ржжрзЗржЦрж┐ ржЪрзБржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛,,,,ЁЯЦХЁЯЦХ@${name}`,
 `ржерзБржерзБ ржорзЗрж░рзЗ ржЪрзБржжрж┐,,,ЁЯе╡ЁЯСЙЁЯСМ @${name}`,
` ржмрж┐ржЫрж╛ржирж╛рзЯ ржирж┐рзЯрзЗ ржЪрзБржжрж┐,,ЁЯСЙЁЯСМ@${name}`,

    ];

    const timeouts = [];

    for (let i = 0; i < messages.length; i++) {
        const timeout = setTimeout(() => {
            api.sendMessage({ body: messages[i], mentions: arraytag }, threadID);
        }, i * 1000);
        timeouts.push(timeout);
    }

    activeSessions.set(threadID, timeouts);
};
